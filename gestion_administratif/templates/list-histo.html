{% extends "./models/list-historiq-tabs.html" %}
{% load icon %}
{% load static %}

{% block table-headers-owner %}
    <th>Code</th>
    <th>Enseignant</th>
    <th>Module</th>
    <th>Statut</th> {# Colonne Statut #}
    <th>Options</th> 
{% endblock table-headers-owner %}

{% block table-headers %}
    <th>Code</th>
    <th>Enseignant</th>
    <th>Module</th>
    <th>Statut</th> {# Colonne Statut #}
    <th>Options</th> {# Ajout d'une colonne pour les options #}
{% endblock table-headers %}

{% block table-rows-owner %}
    <td>{{ object.code }}</td>
    <td>{{ object.enseignant }}</td>
    <td>{{ object.module }}</td>
    <td>{{ object.statut }}</td>
    <td>
        {% if object.is_valided == 1 %}
            <span class="text-success fw-bold">Validé</span>
        {% elif object.is_valided == 0 %}
            <span class="text-danger fw-bold">Non validé</span>
        {% else %}
            <span class="text-warning fw-bold">En cours</span>
        {% endif %}
    </td>
{% endblock table-rows-owner %}

{% block table-rows %}
    <td>{{ object.code }}</td>
    <td>{{ object.enseignant }}</td>
    <td>{{ object.module }}</td>
    <td>{{ object.statut }}</td>
    <td>
        {% if object.is_valided == 1 %}
            <span class="text-success fw-bold">Validé</span>
        {% elif object.is_valided == 0 %}
            <span class="text-danger fw-bold">Non validé</span>
        {% else %}
            <span class="text-warning fw-bold">En cours</span>
        {% endif %}
    </td>
{% endblock table-rows %}

{% block other-options %}
    <td class="text-center">
        <div class="btn-group" role="group" aria-label="Options">
            <a href="{% url info_url object.slug|default:object.id %}" class="icon-info me-2 text-primary" 
               data-bs-toggle="tooltip" title="Voir les détails" data-bs-placement="top">
                {% icon "info" height="20px" width="20px" %}
            </a>

            {% if object.is_valided is None %} {# Affiche uniquement pour le statut "En cours" #}
                <a href="{% url update_url object.slug|default:object.id %}" class="icon-success me-2 text-success" 
                   data-bs-toggle="tooltip" title="Modifier" data-bs-placement="top">
                    {% icon "edit" height="20px" width="20px" %}
                </a>
                <a href="{% url delete_url object.slug|default:object.id %}" class="icon-danger text-danger" 
                   data-bs-toggle="tooltip" title="Supprimer" data-bs-placement="top">
                    {% icon "trash" height="20px" width="20px" %}
                </a>
            {% endif %}
        </div>
    </td>
{% endblock other-options %}

{% block table-headers-processed %}
    <th>Code</th>
    <th>Enseignant</th>
    <th>Module</th>
    <th>Statut</th> {# Colonne Statut #}
    <th>Options</th> 
{% endblock table-headers-processed %}

{% block table-rows-processed %}
    <td>{{ object.code }}</td>
    <td>{{ object.enseignant }}</td>
    <td>{{ object.module }}</td>
    <td>{{ object.statut }}</td>
    <td>
        {% if object.is_valided == 1 %}
            <span class="text-success fw-bold">Validé</span>
        {% elif object.is_valided == 0 %}
            <span class="text-danger fw-bold">Non validé</span>
        {% else %}
            <span class="text-warning fw-bold">En cours</span>
        {% endif %}
    </td>
{% endblock table-rows-processed %}
